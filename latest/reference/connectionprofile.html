<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Connection Profiles | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

            <div class="search-form">
              <form action="/composer/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Connection Profiles</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/latest/introduction/introduction"><b>Introduction</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/latest/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/latest/installing/installing-index"><b>Installing</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/latest/installing/development-tools">Installing the development environment</a></li>
<li><a href="/composer/latest/installing/using-playground-locally">Installing Playground only</a></li>
</ul></li>
<li><p><a href="/composer/latest/tutorials/tutorials"><b>Tutorials</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/latest/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/latest/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/latest/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/latest/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/latest/playground/playground-index"><b>Using Playground</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/latest/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/latest/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/latest/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/latest/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/latest/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/latest/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/latest/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/latest/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/latest/business-network/historian">Hyperledger Composer Historian</a></li>
</ul></li>
<li><p><a href="/composer/latest/applications/applications-index"><b>Developing Applications</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/latest/applications/web">Writing Web or mobile applications</a></li>
<li><a href="/composer/latest/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/latest/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/latest/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/latest/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/latest/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/latest/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/latest/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/latest/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/latest/integrating/call-out">Calling external REST services</a></li>
</ul></li>
<li><p><a href="/composer/latest/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/latest/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/latest/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/latest/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/latest/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/latest/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/latest/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/latest/managing/updating-composer">Updating the Hyperledger Composer Runtime</a></li>
</ul></li>
<li><p><a href="/composer/latest/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/latest/reference/reference-index"><b>Reference</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/latest/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/latest/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/latest/reference/query-language">Query Language</a></li>
<li><a href="/composer/latest/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/latest/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/latest/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/latest/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/latest/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/latest/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/latest/support/support-index"><b>Support</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/latest/api/api-doc-index"><b>API Reference</b><img src="/composer/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/api/allData">API Class Index</a></li>
<li><a href="/composer/latest/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/latest/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/latest/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/latest/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/latest/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/latest/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/latest/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/latest/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/latest/api/common-filesystemcardstore">FileSystemCardStore (Common API)</a></li>
<li><a href="/composer/latest/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/latest/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/latest/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/latest/api/common-memorycardstore">MemoryCardStore (Common API)</a></li>
<li><a href="/composer/latest/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/latest/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/latest/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/latest/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/latest/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/latest/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/latest/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/latest/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/latest/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/latest/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      <li><a href="https://goo.gl/forms/7YPMLP2LTN2hjIRk2">Feedback?</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="connection-profiles">Connection Profiles</h1>

<hr>

<p>A Connection Profile is used by Hyperledger Composer to connect to a runtime.</p>

<h2 id="creating-a-connection-profile">Creating a Connection Profile</h2>

<p>A connection profile for Hyperledger Fabric v1.0 uses the following format:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    {
        "name": "my-fabric",
        "type": "hlfv1",
        "orderers": [
            {
                "url" : "grpc://localhost:7050"
            }
        ],
        "ca": {
            "url": "http://localhost:7054",
            "name": "ca.org1.example.com"
        },
        "peers": [
            {
                "requestURL": "grpc://localhost:7051",
                "eventURL": "grpc://localhost:7053"
            }
        ],
        "channel": "composerchannel",
        "mspID": "Org1MSP",
        "timeout": 300
    }
</code></pre></div>
<p>A more complete example of a connection profile with all possible properties defined is shown here (property values are examples and not necessarily valid values)</p>
<div class="highlight"><pre><code class="language-" data-lang="">     {
        "name": "my-fabric",
        "type": "hlfv1",
        "ca": {
            "url": "https://localhost:7054",
            "name": "ca.org1.example.com",
            "trustedRoots" : ["-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----", "-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----"],
            "verify": true
        },
        "orderers": [
            {
               "url" : "grpcs://localhost:7050",
               "cert": "-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----",
               "hostNameOverride": "ordererHostName"
            }
        ],
        "peers": [
            {
                "requestURL": "grpcs://localhost:7051",
                "eventURL": "grpcs://localhost:7053",
                "cert": "-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----",
                "hostNameOverride": "peerHostName"
            }
        ],
        "channel": "composerchannel",
        "mspID": "Org1MSP",
        "timeout": 300,
        "globalCert": "-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----",
        "maxSendSize": 20,
        "maxRecvSize": 20
    }
</code></pre></div>
<ul>
<li><code>name</code> is a name used to refer to the connection profile, and is required.</li>
<li><code>type</code> defines the version of Hyperledger Fabric that you will connect to. To connect to Hyperledger Fabric v1.0 is must be <code>hlfv1</code>.</li>
<li><code>ca</code> defines the url of a Hyperledger Fabric certificate authority to connect to. If your certificate authority requires a name, it must be defined as a property of <code>ca</code> as shown in the first Hyperledger Fabric v1.0 example above.</li>
<li><code>trustedRoots</code> and <code>verify</code> options for the Certificate Authority are described here <a href="https://fabric-sdk-node.github.io/global.html#TLSOptions">https://fabric-sdk-node.github.io/global.html#TLSOptions</a></li>
<li><code>orderers</code> is an array of objects which describe the orderes to communicate with. Within <code>orderers</code>, you must define the <code>url</code> of each orderer. If you are connecting via TLS, all <code>url</code> properties in your connection profile must begin with <code>grpcs://</code> and must also contain the correct TLS certificate in the <code>cert</code> property.</li>
<li><code>peers</code> is an array of objects describing the peers to communicate with. Each <code>peer</code> must have a defined <code>requestURL</code> and a defined <code>eventURL</code>. If you are connecting using TLS, each <code>peer</code> must also have the correct TLS certificate in the <code>cert</code> property.</li>
<li><code>hostnameOverride</code> is used in a test environment only, when the server certificate&#39;s hostname does not match the actual host endpoint that the server process runs at, the application can work around the client TLS verify failure by setting this property to the value of the server certificate&#39;s hostname.</li>
<li><p>Each instance of the <code>cert</code> property should contain the correct TLS certificate string in PEM format. Multiple certificates can be placed in each <code>cert</code> property.  </p>
<div class="highlight"><pre><code class="language-" data-lang="">-----BEGIN CERTIFICATE----- ... -----END CERTIFICATE-----
</code></pre></div></li>
<li><p><code>mspid</code> is the Membership Service Provider ID of your organization. It is associated with the enrollment id that you will use to interact with the business network.</p></li>
<li><p><code>timeout</code> is an optional property which controls the timeout for each request made to peers and orderers. Please note, some commands may make several sequential requests and the timeout will be applied individually to each request.</p></li>
<li><p><code>globalCert</code> defines the TLS certificate which is used for all peers and orderers if no <code>cert</code> property is specified. If a <code>cert</code> property is specified, it overrides the <code>globalCert</code> property only for the peer or orderer it is specified for.</p></li>
<li><p><code>maxSendSize</code> is an optional property which defines the size limit of outbound grpc messages being send to orderers and peers. The value is defined in megabytes. If this is not set, grpc sets a default. Setting this property to <code>-1</code> results in no size restriction.</p></li>
<li><p><code>maxRecvSize</code> is an optional property which defines the size limit of inbound grpc messages being received from orderers and peers. The value is defined in megabytes. If this is not set, grpc sets a default. Setting this property to <code>-1</code> results in no size restriction.</p></li>
</ul>

<h3 id="hsm-support">HSM Support</h3>

<p>Support for HSM (Hardware Security Module)is now possible so long as you have PKCS#11 support for your HSM and the PKCS#11 module is configured as per the vendor documentation. To drive management of identities through a HSM you need to provide the connection profile with information about your HSM setup e.g.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    {
        "name": "my-fabric-with-hsm",
        "type": "hlfv1",
        "orderers": [
            {
                "url": "grpc://localhost:7050"
            }
        ],
        "ca": {
            "url": "http://localhost:7054",
            "name": "ca.org1.example.com"
        },
        "peers": [
            {
                "requestURL": "grpc://localhost:7051",
                "eventURL": "grpc://localhost:7053"
            },
        ],
        "channel": "composerchannel",
        "mspID": "Org1MSP",
        "timeout": "300",
        "hsm": {
            "library": "/usr/local/lib/myhsm.so",
            "slot": 0,
            "pin": 98765432
        }
    };
</code></pre></div>
<ul>
<li><code>library</code> is the absolute path to the pkcs#11 library required for communication with your specific HSM</li>
<li><code>slot</code> is the configured slot number for the HSM</li>
<li><code>pin</code> is the pin defined for access to that slot.</li>
</ul>

<p>To be able to ensure connection profiles remain portable as well as not hard coding the slot and pin in the connection profile, each of the hsm properties can be referenced from an environment variable. For example if you define environment variables on your system called <code>PKCS_LIBRARY</code>, <code>PKCS_SLOT</code> and <code>PKCS_PIN</code> to hold the hsm information, for example</p>
<div class="highlight"><pre><code class="language-" data-lang="">    export PKCS_LIBRARY=/usr/local/lib/myhsm.so
    export PKCS_SLOT=0
    export PKCS_PIN=98765432
</code></pre></div>
<p>then you can reference these in the connection profile as follows</p>
<div class="highlight"><pre><code class="language-" data-lang="">        "hsm": {
            "library": "{PKCS_LIBRARY}",
            "slot": "{PKCS_SLOT}",
            "pin": "{PKCS_PIN}"
        }
</code></pre></div>
            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/assets/js/nav.js"></script>
<script src="/composer/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
