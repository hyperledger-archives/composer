<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Access Control Language | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

          <div class="docs-current-page-grid">
          <p>Access Control Language</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="../introduction/introduction.html">Introduction</a></p>

<ul>
<li><a href="../introduction/key-concepts.html">Key Concepts</a></li>
<li><a href="../introduction/solution-architecture.html">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="../installing/installing-index.html">Installing Hyperledger Composer</a></p>

<ul>
<li><a href="../installing/getting-started-with-playground.html">Using the Playground online</a></li>
<li><a href="../installing/using-playground-locally.html">Installing the Playground locally</a></li>
<li><a href="../installing/development-tools.html">Installing a development environment</a></li>
</ul></li>
<li><p><a href="../tutorials/tutorials.html">Tutorials</a></p>

<ul>
<li><a href="../tutorials/playground-guide.html">Playground Guide</a></li>
<li><a href="../tutorials/developer-guide.html">Developer Guide</a></li>
</ul></li>
<li><p><a href="../business-network/business-network-index.html">Developing Business Networks</a></p>

<ul>
<li><a href="../business-network/businessnetworkdefinition.html">Business Network Definitions</a></li>
<li><a href="../business-network/bnd-create.html">Create a Business Network Definition</a></li>
<li><a href="../business-network/bnd-deploy.html">Deploying and Updating Business Networks</a></li>
<li><a href="../business-network/publishing-events.html">Emitting Events</a></li>
<li><a href="../business-network/testing.html">Testing Business Networks</a></li>
<li><a href="../business-network/bnd-publish.html">Publish Models or Business Network Definitions</a></li>
<li><a href="../business-network/query.html">Querying Business Network Data</a></li>
</ul></li>
<li><p><a href="../applications/applications-index.html">Developing Applications</a></p>

<ul>
<li><a href="../applications/node.html">Writing a Node.js application</a></li>
<li><a href="../applications/web.html">Writing Web or mobile applications</a></li>
<li><a href="../applications/subscribing-to-events.html">Subscribing to events</a></li>
</ul></li>
<li><p><a href="../integrating/integrating-index.html">Integrating Existing Systems</a></p>

<ul>
<li><a href="../integrating/getting-started-rest-api.html">Generating a REST API</a></li>
<li><a href="../integrating/enabling-rest-authentication.html">Enabling REST API authentication for a business network</a></li>
<li><a href="../integrating/deploying-the-rest-server.html">Deploying the REST server for a business network</a></li>
<li><a href="../integrating/call-out.html">Calling external REST services</a></li>
<li><a href="../integrating/node-red.html">Integrating with Node-RED</a></li>
</ul></li>
<li><p><a href="../managing/managingindex.html">Managing a Deployed Business Network</a></p>

<ul>
<li><a href="../managing/participantsandidentities.html">Participants and identities</a></li>
<li><a href="../managing/participant-add.html">Adding participants</a></li>
<li><a href="../managing/identity-issue.html">Issuing an identity to a participant</a></li>
<li><a href="../managing/identity-revoke.html">Revoking the identity of a participant</a></li>
<li><a href="../managing/github-oauth.html">Enabling playground OAuth with GitHub</a></li>
<li><a href="../managing/current-participant.html">Implementing participant-based access control</a></li>
<li><a href="../managing/updating-composer.html">Updating Hyperledger Composer</a></li>
</ul></li>
<li><p><a href="../problems/diagnostics.html">Diagnosing Problems</a></p></li>
<li><p><a href="../reference/reference-index.html">Reference</a></p>

<ul>
<li><a href="../reference/MeetTheModules.html">Hyperledger Composer npm Modules</a></li>
<li><a href="../reference/cto_language.html">Modeling Language</a></li>
<li><a href="../reference/acl_language.html">Access Control Language</a></li>
<li><a href="../reference/query-language.html">Query Language</a></li>
<li><a href="../reference/model-compatibility.html">Model Compatibility</a></li>
<li><a href="../reference/connectionprofile.html">Connection Profiles</a></li>
<li><a href="../reference/js_scripts.html">Transaction Processor Functions</a></li>
<li><a href="../reference/commands.html">Hyperledger Composer CLI Commands</a></li>
<li><a href="../jsdoc/index.html">API Documentation</a></li>
<li><a href="../reference/glossary.html">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="../support/support-index.html">Support</a></p></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <!-- <li><a href="https://github.com/hyperledger/composer/LICENSE.txt">Legal</a></li> -->
      <li><a href="/composer/unstable/jsdoc/index.html">APIs</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      <li><a href="https://goo.gl/forms/7YPMLP2LTN2hjIRk2">Feedback?</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="hyperledger-composer-access-control-language">Hyperledger Composer Access Control Language</h1>

<hr>

<p>Hyperledger Composer includes an access control language (ACL) that provides declarative access control over the elements of the domain model. By defining ACL rules you can determine which users/roles are permitted to create, read, update or delete elements in a business network&#39;s domain model.</p>

<h2 id="network-access-control">Network Access Control</h2>

<p>Hyperledger Composer differentiates between access control for resources within a business network (business access control) and access control for network administrative changes (network access control). Business access control and network access control are both defined in the access control file (<code>.acl</code>) for a business network.</p>

<p>Network access control uses the system namespace, which is implicitly extended by all resources in a business network; and grants or denies access to specific actions as defined below, and is intended to allow for more nuanced access to certain network-level operations.</p>

<h3 id="what-does-network-access-control-allow-or-disallow">What does network access control allow or disallow?</h3>

<p>Network access control affects the following CLI commands:</p>

<h4 id="composer-network">Composer Network</h4>

<p><strong>composer network deploy</strong></p>

<p>Network access is required to use the CREATE operation for registries and networks.</p>

<p><strong>composer network download</strong></p>

<p>Network access is required to use the READ operation for registries and networks.</p>

<p><strong>composer network list</strong></p>

<p>Network access is required to use the READ operation for registries and networks.</p>

<p><strong>composer network logLevel</strong></p>

<p>Network access is required to use the UPDATE operation for networks.</p>

<p><strong>composer network ping</strong></p>

<p>Network access is required to use the READ operation on registries and networks.</p>

<p><strong>composer network undeploy</strong></p>

<p>Network access is required to use the DELETE operation on registries and networks.</p>

<p><strong>composer network update</strong></p>

<p>Network access is required to use the UPDATE or CREATE operation on registries, or the UPDATE operation on networks.</p>

<h4 id="composer-identity">Composer Identity</h4>

<p><strong>composer network import</strong></p>

<p>Network access is required to use the UPDATE operation on identity registries or the CREATE operation on identities.</p>

<p><strong>composer network issue</strong></p>

<p>Network access is required to use the UPDATE operation on identity registries or the CREATE operation on identities.</p>

<p><strong>composer network revoke</strong></p>

<p>Network access is required to use the UPDATE operation on identity registries or the DELETE operation on identities.</p>

<h4 id="composer-participant">Composer Participant</h4>

<p><strong>composer network add</strong></p>

<p>Network access is required to use the CREATE operation on participants or the UPDATE operation on participant registries.</p>

<h3 id="granting-network-access-control">Granting network access control</h3>

<p>Network access is granted using the system namespace. The system namespace is always <code>org.hyperledger.composer.system.Network</code> for network access, and <code>org.hyperledger.composer.system</code> for all access. The following access control rules gives the <strong>networkControl</strong> participant the authority to use all operations with network commands.</p>

<p>rule networkControlPermission {
  description:  &quot;networkControl can access network commands&quot;
  participant: &quot;org.acme.vehicle.auction.networkControl&quot;
  operation: ALL
  resource: &quot;org.hyperledger.composer.system.Network&quot;
  action: ALLOW<br>
}</p>

<p>The following access control rule will give all participants access to all operations and commands in the business network, including network access and business access.</p>
<div class="highlight"><pre><code class="language-" data-lang="">rule AllAccess {
  description: "AllAccess - grant everything to everybody"
  participant: "org.hyperledger.composer.system.Participant"
  operation: ALL
  resource: "org.hyperledger.composer.system.**"
  action: ALLOW
}
</code></pre></div>
<h2 id="evaluation-of-access-control-rules">Evaluation of Access Control Rules</h2>

<p>Access control for a business network is defined by an ordered set of ACL rules. The rules are evaluated in order, and the first rule whose condition matches determines whether access is granted or denied. If no rule match then access is <strong>denied</strong>.</p>

<p>ACL rules are defined in a file called <code>permissions.acl</code> in the root of the business network. If this file is missing from the business network then all access is <strong>permitted</strong>.</p>

<h2 id="access-control-rule-grammar">Access Control Rule Grammar</h2>

<p>There are two types of ACL rules: simple ACL rules and conditional ACL rules. Simple rules are used to control access to a namespace, asset or property of an asset by a participant type or participant instance.</p>

<p>For example, the rule below states that any instance of the <code>org.example.SampleParticipant</code> type can perform ALL operations on all instances of <code>org.example.SampleAsset</code>.</p>
<div class="highlight"><pre><code class="language-" data-lang="">rule SimpleRule {
    description: "Description of the ACL rule"
    participant: "org.example.SampleParticipant"
    operation: ALL
    resource: "org.example.SampleAsset"
    action: ALLOW
}
</code></pre></div>
<p>Conditional ACL rules introduce variable bindings for the participant and the resource being accessed, and a Boolean JavaScript expression, which, when true, can either ALLOW or DENY access to the resource by the participant.</p>

<p>For example, the rule below states that any instance of the <code>org.example.SampleParticipant</code> type can perform ALL operations on all instances of <code>org.example.SampleAsset</code> IF the participant is the owner of the asset.</p>
<div class="highlight"><pre><code class="language-" data-lang="">rule SampleConditionalRule {
    description: "Description of the ACL rule"
    participant(m): "org.example.SampleParticipant"
    operation: ALL
    resource(v): "org.example.SampleAsset"
    condition: (v.owner.getIdentifier() == m.getIdentifier())
    action: ALLOW
}
</code></pre></div>
<p>Conditional ACL rules can also specify an optional transaction clause. When the transaction clause is specified, the ACL rule only allows access to the resource by the participant if the participant submitted a transaction, and that transaction is of the specified type.</p>

<p>For example, the rule below states that any instance of the <code>org.example.SampleParticipant</code> type can perform ALL operations on all instances of <code>org.example.SampleAsset</code> IF the participant is the owner of the asset AND the participant submitted a transaction of the <code>org.example.SampleTransaction</code> type to perform the operation.</p>
<div class="highlight"><pre><code class="language-" data-lang="">rule SampleConditionalRuleWithTransaction {
    description: "Description of the ACL rule"
    participant(m): "org.example.SampleParticipant"
    operation: READ, CREATE, UPDATE
    resource(v): "org.example.SampleAsset"
    transaction(tx): "org.example.SampleTransaction"
    condition: (v.owner.getIdentifier() == m.getIdentifier())
    action: ALLOW
}
</code></pre></div>
<p>Multiple ACL rules may be defined that conceptually define a decision table. The actions of the decision tree define access control decisions (ALLOW or DENY). If the decision table fails to match then by default access is denied.</p>

<p><strong>Resource</strong> defines the things that the ACL rule applies to. This can be a class, all classes within a namespace, or all classes under a namespace. It can also be an instance of a class.</p>

<p>Resource Examples:</p>

<ul>
<li>Namespace: org.example.*</li>
<li>Namespace (recursive): org.example.**</li>
<li>Class in namespace: org.example.Car</li>
<li>Instance of a class: org.example.Car#ABC123</li>
</ul>

<p><strong>Operation</strong> identifies the action that the rule governs. Four actions are supported: CREATE, READ, UPDATE, and DELETE. You can use ALL to specify that the rule governs all supported actions. Alternatively, you can use a comma separated list to specify that the rule governs a set of supported actions.</p>

<p><strong>Participant</strong> defines the person or entity that has submitted a transaction for processing. If a Participant is specified they must exist in the Participant Registry. The PARTICIPANT may optionally be bound to a variable for use in a PREDICATE. The special value &#39;ANY&#39; may be used to denote that participant type checking is not enforced for a rule.</p>

<p><strong>Transaction</strong> defines the transaction that the participant must have submitted in order to perform the specified operation against the specified resource. If this clause is specified, and the participant did not submit a transaction of this type - for example, they are using the CRUD APIs - then the ACL rule does not allow access.</p>

<p><strong>Condition</strong> is a Boolean JavaScript expression over bound variables. Any JavaScript expression that is legal with the an <code>if(...)</code> expression may be used here. JavaScript expressions used for the condition of an ACL rule can refer to JavaScript utility functions in a script file. This allows a user to easily implement complex access control logic, and re-use the same access control logic functions across multiple ACL rules.</p>

<p><strong>Action</strong> identifies the action of the rule. It must be one of: ALLOW, DENY.</p>

<h2 id="examples">Examples</h2>

<p>Example ACL rules (in evaluation order):</p>
<div class="highlight"><pre><code class="language-" data-lang="">rule R1 {
    description: "Fred can DELETE the car ABC123"
    participant: "org.example.Driver#Fred"
    operation: DELETE
    resource: "org.example.Car#ABC123"
    action: ALLOW
}

rule R2 {
    description: "regulator with ID Bill can not update a Car if they own it"
    participant(r): "org.example.Regulator#Bill"
    operation: UPDATE
    resource(c): "org.example.Car"
    condition: (c.owner == r)
    action: DENY
}

rule R3 {
    description: "regulators can perform all operations on Cars"
    participant: "org.example.Regulator"
    operation: ALL
    resource: "org.example.Car"
    action: ALLOW
}

rule R4 {
    description: "Everyone can read all resources in the org.example namespace"
    participant: "ANY"
    operation: READ
    resource: "org.example.*"
    action: ALLOW
}

rule R5 {
    description: "Everyone can read all resources under the org.example namespace"
    participant: "ANY"
    operation: READ
    resource: "org.example.**"
    action: ALLOW
}
</code></pre></div>
<p>Rules are evaluated from top (most specific) to bottom (least specific). As soon as the Participant, Operation and Resource match for a rule then subsequent rules are not evaluated.</p>

<p>This ordering makes the decision table faster to scan for both humans and computers. If no ACL rule fires then the access control decision is DENY.</p>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/unstable/assets/js/nav.js"></script>

    

    


  </div>
</body>
</html>
