<!doctype html>
<html lang="en">
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>API Reference | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  
    <!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-91314349-2', 'auto');
ga('require', 'outboundLinkTracker');
ga('require', 'eventTracker');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="/composer/unstable/assets/js/autotrack.js"></script>
<!-- End Google Analytics -->

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

            <div class="search-form">
              <form action="/composer/unstable/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/unstable/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>API Reference</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="../introduction/introduction.html"><b>Introduction</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../introduction/key-concepts.html">Key Concepts</a></li>
<li><a href="../introduction/solution-architecture.html">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="../installing/installing-index.html"><b>Installing</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../installing/getting-started-with-playground.html">Using the Playground online</a></li>
<li><a href="../installing/prereqs-mac.html">Installing pre-requisites on Mac OS</a></li>
<li><a href="../installing/using-playground-locally.html">Installing the Playground locally</a></li>
<li><a href="../installing/development-tools.html">Installing a development environment</a></li>
</ul></li>
<li><p><a href="../tutorials/tutorials.html"><b>Tutorials</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../tutorials/playground-tutorial.html">Playground Tutorial</a></li>
<li><a href="../tutorials/developer-tutorial.html">Developer Tutorial</a></li>
<li><a href="../tutorials/queries.html">Queries Tutorial</a></li>
<li><a href="../tutorials/deploy-to-fabric-single-org.html">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="../tutorials/deploy-to-fabric-multi-org.html">Deploying to a multi-organization Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="../playground/playground-index.html"><b>Using Playground</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../playground/id-cards-playground.html">Business Network Cards</a></li>
</ul></li>
<li><p><a href="../business-network/business-network-index.html"><b>Developing Business Networks</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../business-network/businessnetworkdefinition.html">Business Network Definitions</a></li>
<li><a href="../business-network/bnd-create.html">Create a Business Network Definition</a></li>
<li><a href="../business-network/bnd-deploy.html">Deploying Business Networks</a></li>
<li><a href="../business-network/publishing-events.html">Emitting Events</a></li>
<li><a href="../business-network/testing.html">Testing Business Networks</a></li>
<li><a href="../business-network/bnd-publish.html">Publish Models or Business Network Definitions</a></li>
<li><a href="../business-network/query.html">Using Queries and Filters with Business Network Data</a></li>
<li><a href="../business-network/programmatic-access-control.html">Programmatic access control</a></li>
<li><a href="../business-network/historian.html">Hyperledger Composer Historian</a></li>
</ul></li>
<li><p><a href="../applications/applications-index.html"><b>Developing Applications</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../applications/node.html">Writing a Node.js application</a></li>
<li><a href="../applications/web.html">Writing Web or mobile applications</a></li>
<li><a href="../applications/subscribing-to-events.html">Subscribing to events</a></li>
</ul></li>
<li><p><a href="../integrating/integrating-index.html"><b>Integrating Existing Systems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../integrating/getting-started-rest-api.html">Generating a REST API</a></li>
<li><a href="../integrating/publishing-events.html">Publishing events from the REST server</a></li>
<li><a href="../integrating/enabling-rest-authentication.html">Enabling authentication for the REST server</a></li>
<li><a href="../integrating/enabling-multiuser.html">Enabling multiple user mode for the REST server</a></li>
<li><a href="../integrating/securing-the-rest-server.html">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="../integrating/deploying-the-rest-server.html">Deploying the REST server for a business network</a></li>
<li><a href="../integrating/node-red.html">Integrating with Node-RED</a></li>
<li><a href="../integrating/call-out.html">Calling external REST services</a></li>
</ul></li>
<li><p><a href="../managing/managingindex.html"><b>Managing a Deployed Business Network</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../managing/participantsandidentities.html">Participants and identities</a></li>
<li><a href="../managing/participant-add.html">Adding participants</a></li>
<li><a href="../managing/id-cards-playground.html">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="../managing/identity-issue.html">Issuing a new identity to a participant</a></li>
<li><a href="../managing/identity-bind.html">Binding an existing identity to a participant</a></li>
<li><a href="../managing/identity-list.html">Listing all identities in a business network</a></li>
<li><a href="../managing/identity-revoke.html">Revoking an identity from a participant</a></li>
<li><a href="../managing/updating-composer.html">Updating the Hyperledger Composer Runtime</a></li>
</ul></li>
<li><p><a href="../problems/diagnostics.html"><b>Diagnosing Problems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="../reference/reference-index.html"><b>Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../reference/MeetTheModules.html">Hyperledger Composer npm Modules</a></li>
<li><a href="../reference/cto_language.html">Modeling Language</a></li>
<li><a href="../reference/acl_language.html">Access Control Language</a></li>
<li><a href="../reference/query-language.html">Query Language</a></li>
<li><a href="../reference/model-compatibility.html">Model Compatibility</a></li>
<li><a href="../reference/connectionprofile.html">Connection Profiles</a></li>
<li><a href="../reference/js_scripts.html">Transaction Processor Functions</a></li>
<li><a href="../reference/commands.html">Hyperledger Composer CLI Commands</a></li>
<li><a href="../reference/glossary.html">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="../support/support-index.html"><b>Support</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="../api/api-doc-index.html"><b>API Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="../api/allData.html">API Class Index</a></li>
<li><a href="../api/admin-adminconnection.html">AdminConnection (Admin API)</a></li>
<li><a href="../api/client-assetregistry.html">AssetRegistry (Client API)</a></li>
<li><a href="../api/client-businessnetworkconnection.html">BusinessNetworkConnection (Client API)</a></li>
<li><a href="../api/client-historian.html">Historian (Client API)</a></li>
<li><a href="../api/client-identityregistry.html">IdentityRegistry (Client API)</a></li>
<li><a href="../api/client-participantregistry.html">ParticipantRegistry (Client API)</a></li>
<li><a href="../api/client-query.html">Query (Client API)</a></li>
<li><a href="../api/client-registry.html">Registry (Client API)</a></li>
<li><a href="../api/client-transactionregistry.html">TransactionRegistry (Client API)</a></li>
<li><a href="../api/common-baseexception.html">BaseException (Common API)</a></li>
<li><a href="../api/common-basefileexception.html">BaseFileException (Common API)</a></li>
<li><a href="../api/common-businessnetworkcardstore.html">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="../api/common-businessnetworkdefinition.html">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="../api/common-businessnetworkmetadata.html">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="../api/common-concept.html">Concept (Common API)</a></li>
<li><a href="../api/common-factory.html">Factory (Common API)</a></li>
<li><a href="../api/common-idcard.html">IdCard (Common API)</a></li>
<li><a href="../api/common-identifiable.html">Identifiable (Common API)</a></li>
<li><a href="../api/common-introspector.html">Introspector (Common API)</a></li>
<li><a href="../api/common-relationship.html">Relationship (Common API)</a></li>
<li><a href="../api/common-resource.html">Resource (Common API)</a></li>
<li><a href="../api/common-serializer.html">Serializer (Common API)</a></li>
<li><a href="../api/common-typed.html">Typed (Common API)</a></li>
<li><a href="../api/common-validatedconcept.html">ValidatedConcept (Common API)</a></li>
<li><a href="../api/common-validatedresource.html">ValidatedResource (Common API)</a></li>
<li><a href="../api/runtime-api.html">Api (Runtime API)</a></li>
<li><a href="../api/runtime-assetregistry.html">AssetRegistry (Runtime API)</a></li>
<li><a href="../api/runtime-factory.html">Factory (Runtime API)</a></li>
<li><a href="../api/runtime-participantregistry.html">ParticipantRegistry (Runtime API)</a></li>
<li><a href="../api/runtime-query.html">Query (Runtime API)</a></li>
<li><a href="../api/runtime-serializer.html">Serializer (Runtime API)</a></li>
<li><a href="../api/undefined-filewallet.html">FileWallet ( API)</a></li>
<li><a href="../api/undefined-wallet.html">Wallet ( API)</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/fabric-composer">Stack Overflow</a></li>
      <li><a href="https://goo.gl/forms/7YPMLP2LTN2hjIRk2">Feedback?</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="hyperledger-composer-api">Hyperledger Composer API</h1>

<p>Hyperledger Composer  is an application development framework for building Blockchain applications based on Hyperledger. This is the JavaScript documentation for the Hyperledger Composer Client, Admin, and Runtime JavaScript APIs.</p>

<p>The <a href="../jsdoc/index.html">original JSDoc format</a> can still be found temporarily, whilst the new format is refinded. Please do send us your feedback.</p>

<h2 id="quick-links">Quick Links</h2>

<p><a href="allData#common-api">Common API</a>  -  <a href="allData#client-api">Client API</a>  -  <a href="allData#admin-api">Admin API</a>  -  <a href="allData#runtime-api">Runtime API</a></p>

<h2 id="overview">Overview</h2>

<p>All the classes are listed in the <a href="./allData.html">Class Index</a></p>

<p>The major components of Hyperledger Composer are:</p>

<ol>
<li>The Hyperledger Composer language for describing the structure of resources (assets, participants
and transactions) that participate in a blockchain backed business network.</li>
<li>JavaScript APIs to query, create, update and delete resources and submit transactions
from client applications. Hyperledger Composer resources are stored on the Blockchain.</li>
<li>JavaScript transaction processor functions that runs on Hyperledger Fabric when transactions are
submitted for processing. These functions may update the state of resources
stored on the Blockchain via server-side Hyperledger Composer APIs.</li>
</ol>

<h2 id="javascript-language-support">JavaScript language support</h2>

<p>Applications that are using the client or admin APIs, that are not running inside a transaction function can be written to use ES6.
As an example, it allows the use of the async/await syntax. </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="c1">// connect using the 'newUserCard', create an asset, add it to a registry and get all assets. </span>
  <span class="k">try</span><span class="p">{</span>
    <span class="kr">await</span> <span class="nx">businessNetworkConnection</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'newUserCard'</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">newAsset</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">.</span><span class="nx">newAsset</span><span class="p">(</span><span class="s1">'org.acme.sample'</span><span class="p">,</span><span class="s1">'SampleAsset'</span><span class="p">,</span><span class="s1">'1148'</span><span class="p">);</span>
    <span class="kr">await</span> <span class="nx">assestRegistry</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">newAsset</span><span class="p">);</span>

    <span class="nx">result</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">assetRegistry</span><span class="p">.</span><span class="nx">getAll</span><span class="p">();</span>
    <span class="nx">LOG</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>

    <span class="kr">await</span> <span class="nx">businessNetworkConnection</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="c1">// error handling</span>
  <span class="p">}</span>
</code></pre></div>
<p>The promise chain syntax can be used, and must be used within Transaction Functions. </p>

<p><strong>All code within a transaction function must use ES5 syntax - along with Promise Chains</strong></p>

<p>Using promises the example above would be:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="c1">// connect using the 'newUserCard', create an asset, add it to a registry and get all assets. </span>

  <span class="k">return</span> <span class="nx">businessNetworkConnection</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'newUserCard'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span>  <span class="p">{</span> 
        <span class="kd">var</span> <span class="nx">newAsset</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">.</span><span class="nx">newAsset</span><span class="p">(</span><span class="s1">'org.acme.sample'</span><span class="p">,</span><span class="s1">'SampleAsset'</span><span class="p">,</span><span class="s1">'1148'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">assetRegistry</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">newAsset</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">return</span> <span class="nx">assetRegistry</span><span class="p">.</span><span class="nx">getAll</span><span class="p">();</span>
    <span class="p">})</span> 
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">LOG</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">businessNetworkConnection</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="c1">// error handling</span>
    <span class="p">});</span>
</code></pre></div>
<h2 id="admin-and-client-api">Admin and Client API</h2>

<p>These APIs are specifically used to obtain connect to a Business Network Connection to either administer it, or obtain the resources to perform business operations. Business operations could be to add assets, or submit transaction functions.</p>

<p>The starting point for these APIs are the <code>AdminConnection</code> or <code>BusinessNetworkConnection</code>. Both APIs follow a similar pattern to connect.
A name of an already imported business network card is needed. By default these cards are ready from the file system card store.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">AdminConnection</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'composer-admin'</span><span class="p">).</span><span class="nx">AdminConnection</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">();</span>
<span class="kr">await</span> <span class="nx">adminConnection</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'cardNameToUse'</span><span class="p">);</span>

<span class="c1">//</span>
<span class="kd">const</span> <span class="nx">BusinessNetworkConnection</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'composer-client'</span><span class="p">).</span><span class="nx">BusinessNetworkConnection</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">bizNetConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">businessNetworkDefintion</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">bizNetConnection</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'cardNameToUse'</span><span class="p">);</span>

</code></pre></div>
<h3 id="registries">Registries</h3>

<p>A key part of the Client API is are the Regsitry classes. There are the <em>AssetRegsitry</em>, <em>ParticipantRegistry</em>, <em>IdentityRegistry</em>, <em>TransactionRegistries</em> and the <em>Historian</em>. Each of these have a common super type of <em>Registry</em>.</p>

<p>The Registry supports accessing a registry to obtain resources. </p>

<ul>
<li>Add one or more resources</li>
<li>Update one or more resources</li>
<li>Remove one or all resources</li>
<li>Get one or all resources</li>
<li>Check if a resource exists</li>
<li>Resolve one or all resources</li>
</ul>

<p>The difference between resolve and get are that get will no resolve any relationships that are defined in the resource. A reference to the resource will be supplied. A resolve call will iterate over all the relationships.</p>

<p>Registries are automatically created for each asset, participnat, and transaction. Additional registries can be created if required using the addRegistry call. </p>

<h2 id="common-api">Common API</h2>

<p>The Common API contains the APIs used to obtain information about the Business Network you are conencted to and to create new assets, participants, transactions and events. It also provides APIs to find out information about these resources.  </p>

<p>For example to create a new asset</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">let</span> <span class="nx">factory</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">businessNetworkDefinition</span><span class="p">.</span><span class="nx">getFactory</span><span class="p">();</span>
<span class="nx">owner</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">.</span><span class="nx">newResource</span><span class="p">(</span><span class="s1">'net.biz.digitalPropertyNetwork'</span><span class="p">,</span> <span class="s1">'Person'</span><span class="p">,</span> <span class="s1">'PID:1234567890'</span><span class="p">);</span>
<span class="nx">owner</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="s1">'Fred'</span><span class="p">;</span>
<span class="nx">owner</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="s1">'Bloggs'</span><span class="p">;</span>
</code></pre></div>
<h3 id="runtime-api">Runtime API</h3>

<p>The Runtime API is the available API to all transaction functions. It allows access to APIs to
- build and issue queries
- emit events
- get registries of all types
- get the current participant
- get the serializer to create resources from JavaScript objects
- post HTTP REST calls</p>

<p>The Common API calls are also available to interact with resources, together with the Registry APIs. For each </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Get the driver participant registry.</span>
<span class="k">return</span> <span class="nx">getParticipantRegistry</span><span class="p">(</span><span class="s1">'org.acme.Driver'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">driverParticipantRegistry</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Call methods on the driver participant registry.</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Add optional error handling here.</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>NOTE: All transaction functions should be written to ES5 and additional use Promise chains</strong></p>

<h3 id="transaction-functions">Transaction Functions</h3>

<p>The transaction function is the part of Composer that can be considered to be the <em>smart contract</em> execution. It will invoked from a client application application (or via a REST API). It will work on the state of assets, participant etc as held within the underling blockchain worldstate. The operations performed by the transaction function, will then be subject to the endorsment and order protocols as established by the the same underlying blockchain. As such the <em>source of truth</em> of the assets is maintained. </p>

<p>Definition of the transaction functions is within the .cto model file.</p>
<div class="highlight"><pre><code class="language-" data-lang="">namespace net.biz.digitalPropertyNetwork

transaction RegisterPropertyForSale identified by transactionId{
  o String transactionId
  --&gt; LandTitle title
}
</code></pre></div>
<p>This is then linked to the implementation of the transaction function by annotations in the comment of the function.  <code>@transaction</code> marks this function as a transaction function. <code>@param</code> connects this transaction to the <code>RegisterPropertyForSale</code> defined in the model.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**
 * @param {net.biz.digitalPropertyNetwork} registryProperty
 * @transaction
 */</span>
<span class="kd">function</span> <span class="nx">codeToImplementatTheTransactionFunction</span><span class="p">(</span><span class="nx">registryProperty</span><span class="p">){</span>
 <span class="c1">//</span>
<span class="p">}</span>
</code></pre></div>
<p>The function argument <code>registryProperty</code> for sale will be a fully resolved copy of the transaction resource. The <code>--&gt; LandTitle title</code> in this example would be a fully resolved LandTitle resource.</p>

<h4 id="restrictions">Restrictions</h4>

<ul>
<li>Transaction functions should not use random numbers</li>
<li>Additional transactions can not be submitted from the implemetnation of a transaction function. Other functions can be called but will be considered as part the same transaction. This is irrespective of the annotations of the function called.</li>
<li>Always use <code>getCurrentParticipant()</code> to get the details of the invoking participant</li>
</ul>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/unstable/assets/js/nav.js"></script>
<script src="/composer/unstable/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
