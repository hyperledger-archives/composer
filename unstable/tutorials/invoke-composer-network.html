<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!doctype html>
<html lang="en">
<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
  
  
  

<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<head>
  <meta charset="utf-8">
  
    <title>Interacting with other business networks | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

          <select id="version" name="version" onchange="location = this.options[this.selectedIndex].value;">
              <option>Select version</option>
              <option value="/composer/latest/introduction/introduction.html" title="The most stable version of Composer">Latest</option>
              <option value="/composer/unstable/introduction/introduction.html" title="The version that will replace Latest">Latest-unstable</option>
          </select>

            <div class="search-form">
              <form action="/composer/unstable/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/unstable/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Interacting with other business networks</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/unstable/introduction/introduction"><b>Introduction</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/unstable/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/unstable/installing/installing-index"><b>Installing</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/unstable/installing/development-tools">Installing the development environment</a></li>
<li><a href="/composer/unstable/installing/update-dev-env">Updating the development environment</a></li>
<li><a href="/composer/unstable/installing/uninstall-dev-env">Uninstalling the development environment</a></li>
</ul></li>
<li><p><a href="/composer/unstable/tutorials/tutorials"><b>Tutorials</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/unstable/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/composer/unstable/tutorials/invoke-composer-network">Interacting with other business networks</a></li>
<li><a href="/composer/unstable/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
<li><a href="/composer/unstable/tutorials/google_oauth2_rest">Using Google OAUTH2.0 with a Composer REST server</a></li>
</ul></li>
<li><p><a href="/composer/unstable/playground/playground-index"><b>Using Playground</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/unstable/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/unstable/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/unstable/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/unstable/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/unstable/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/unstable/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/unstable/business-network/upgrading-bna">Upgrading a deployed business network</a></li>
<li><a href="/composer/unstable/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/unstable/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/unstable/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/composer/unstable/business-network/cloud-wallets">Customising card stores</a></li>
</ul></li>
<li><p><a href="/composer/unstable/applications/applications-index"><b>Developing Applications</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/unstable/applications/web">Writing Web applications</a></li>
<li><a href="/composer/unstable/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/unstable/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/unstable/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/unstable/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/unstable/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/unstable/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/unstable/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/unstable/integrating/customizing-the-rest-server">Customizing the REST server for a business network</a></li>
<li><a href="/composer/unstable/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/unstable/integrating/call-out">Calling external HTTP or REST services</a></li>
</ul></li>
<li><p><a href="/composer/unstable/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/unstable/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/unstable/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/unstable/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/unstable/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/unstable/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/unstable/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/unstable/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/unstable/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/unstable/reference/reference-index"><b>Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/unstable/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/unstable/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/unstable/reference/query-language">Query Language</a></li>
<li><a href="/composer/unstable/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/unstable/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/unstable/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/unstable/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/unstable/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/unstable/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/unstable/support/support-index"><b>Support</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/unstable/api/api-doc-index"><b>API Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/api/allData">API Class Index</a></li>
<li><a href="/composer/unstable/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/unstable/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/unstable/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/unstable/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/unstable/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/unstable/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/unstable/api/common-decoratorfactory">DecoratorFactory (Common API)</a></li>
<li><a href="/composer/unstable/api/common-decorator">Decorator (Common API)</a></li>
<li><a href="/composer/unstable/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/unstable/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/unstable/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/unstable/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/unstable/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/unstable/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/unstable/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/unstable/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/unstable/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/unstable/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/unstable/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/unstable/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/unstable/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/unstable/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
<li><p><a href="/composer/unstable/systemns/systemns-index"><b>System Namespace Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/systemns/01_summary">Summary</a></li>
<li><a href="/composer/unstable/systemns/02_assets">Assets</a></li>
<li><a href="/composer/unstable/systemns/03_participants">Participants</a></li>
<li><a href="/composer/unstable/systemns/04_transactions">Transactions</a></li>
<li><a href="/composer/unstable/systemns/05_events">Events</a></li>
<li><a href="/composer/unstable/systemns/06_enums">Enums</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/hyperledger-composer">Stack Overflow</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="interacting-with-other-business-networks">Interacting with other business networks</h1>

<p>Hyperledger Composer includes functionality that can be used by a business network to access an asset, participant, or transaction that is recorded in another business network.</p>

<p>This tutorial will demonstrate the steps that a business network developer needs to take in order to invoke a Hyperledger Composer business network from a different business network. As part of the tutorial you will deploy the same business network twice. The business networks in this tutorial will be on the same channel, but they can be on different channels. The business network used in this example will be the tutorial network that is outlined in the <a href="./developer-tutorial.html">developer tutorial</a>. This tutorial will refer to the business networks as &quot;A&quot; and &quot;B&quot;</p>

<h2 id="prerequisites">Prerequisites</h2>

<ol>
<li>Before you continue, ensure that you have followed the steps in <a href="../installing/development-tools.html">installing a development environment</a>.</li>
</ol>

<h2 id="step-one-starting-a-hyperledger-fabric-network">Step One: Starting a Hyperledger Fabric network</h2>

<p>In order to follow this tutorial, you must start a Hyperledger Fabric network. You can use the simple Hyperledger Fabric network provided in the development environment, or you can use your own Hyperledger Fabric network that you have built by following the Hyperledger Fabric documentation.</p>

<p>The tutorial will assume that you use the simple Hyperledger Fabric network provided in the development environment. If you use your own Hyperledger Fabric network, then you must map between the configuration detailed below and your own configuration.</p>

<ol>
<li><p>Start a clean Hyperledger Fabric by running the following commands:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/fabric-dev-servers
export FABRIC_VERSION=hlfv12
./stopFabric.sh
./teardownFabric.sh
./downloadFabric.sh
./startFabric.sh
</code></pre></div></li>
<li><p>Delete any business network cards that may exist in your wallet. It is safe to ignore any errors that state that the business network cards cannot be found:</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer card delete -c PeerAdmin@hlfv1
</code></pre></div></li>
</ol>

<p>If these commands fail, then you have business network cards from a previous version and you will have to delete the file system card store.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    rm -fr ~/.composer
</code></pre></div>
<ol>
<li><p>Create the Peer Admin Card by running the following command        </p>
<div class="highlight"><pre><code class="language-" data-lang="">./createPeerAdminCard.sh
</code></pre></div></li>
</ol>

<h2 id="step-two-define-the-business-networks">Step Two: Define the business networks</h2>

<ol>
<li><p>Follow steps one and two in the <a href="./developer-tutorial.html">developer tutorial</a>. This will be network A.</p></li>
<li><p>Follow steps one and two again but create a business network called <code>other-tutorial-network</code>. This will be network B.</p></li>
<li><p>The transaction logic needs to be updated in network A and to query an asset in business network B and then update the quantity property of an asset in business network A.</p>

<p>Replace the contents of the <code>logic.js</code> script file to update the transaction processor function to be the following.</p>
<div class="highlight"><pre><code class="language-" data-lang="">        <span class="sd">/**
         * Track the trade of a commodity from one trader to another
         * @param {org.example.mynetwork.Trade} trade - the trade to be processed
         * @transaction
         */</span>
        <span class="k">async</span> <span class="k">function</span> <span class="nf">tradeCommodity</span><span class="p">(</span><span class="nx">trade</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="o">.</span><span class="nx">owner</span> <span class="o">=</span> <span class="nx">trade</span><span class="o">.</span><span class="nx">newOwner</span><span class="p">;</span>

            <span class="k">const</span> <span class="no">otherNetworkData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getNativeAPI</span><span class="p">()</span><span class="o">.</span><span class="nx">invokeChaincode</span><span class="p">(</span><span class="s1">'other-tutorial-network'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'getResourceInRegistry'</span><span class="p">,</span> <span class="s1">'Asset'</span><span class="p">,</span> <span class="s1">'org.example.mynetwork.Commodity'</span><span class="p">,</span> <span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="o">.</span><span class="nx">tradingSymbol</span><span class="p">],</span> <span class="s1">'composerchannel'</span><span class="p">);</span>                    
            <span class="k">const</span> <span class="no">stringAsset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">otherNetworkData</span><span class="o">.</span><span class="nx">payload</span><span class="o">.</span><span class="nx">toArrayBuffer</span><span class="p">())</span><span class="o">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'utf8'</span><span class="p">);</span>
            <span class="k">const</span> <span class="no">asset</span> <span class="o">=</span> <span class="nx">getSerializer</span><span class="p">()</span><span class="o">.</span><span class="nx">fromJSON</span><span class="p">(</span><span class="nx">JSON</span><span class="o">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">stringAsset</span><span class="p">));</span>

            <span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="o">.</span><span class="nx">quantity</span> <span class="o">=</span> <span class="nx">asset</span><span class="o">.</span><span class="nx">quantity</span><span class="p">;</span>

            <span class="k">const</span> <span class="no">assetRegistry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getAssetRegistry</span><span class="p">(</span><span class="s1">'org.example.mynetwork.Commodity'</span><span class="p">);</span>
            <span class="k">await</span> <span class="nx">assetRegistry</span><span class="o">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></li>
<li><p>Follow step three in the <a href="./developer-tutorial.html">developer tutorial</a>.</p></li>
</ol>

<h2 id="step-three-deploy-the-business-networks">Step Three: Deploy the business networks</h2>

<ol>
<li><p>Install and start business network A using the following commands</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna
composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkA.card
composer card import --file networkA.card --card networkA
</code></pre></div></li>
<li><p>Install and start business network B using the following commands</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network install --card PeerAdmin@hlfv1 --archiveFile other-tutorial-network@0.0.1.bna
composer network start --networkName other-tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkB.card
composer card import --file networkB.card --card networkB
</code></pre></div></li>
<li><p>To check that the business networks have been deployed successfully run the following commands to ping the business networks</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network ping --card networkA
composer network ping --card networkB
</code></pre></div></li>
</ol>

<h2 id="step-four-create-the-assets">Step Four: Create the assets</h2>

<ol>
<li><p>Create a participant in business network A. Run the following command.</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer participant add --card networkA -d '{"$class": "org.example.mynetwork.Trader", "tradeId": "bob@example.com", "firstName": "Bob", "lastName": "Jones"}'
</code></pre></div></li>
<li><p>Create an asset in business network  A</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer transaction submit --card networkA -d '{"$class": "org.hyperledger.composer.system.AddAsset", "targetRegistry" : "resource:org.hyperledger.composer.system.AssetRegistry#org.example.mynetwork.Commodity", "resources": [{"$class": "org.example.mynetwork.Commodity","tradingSymbol": "Ag","owner": "resource:org.example.mynetwork.Trader#bob@example.com","description": "a lot of gold", "mainExchange": "exchange", "quantity" : 250}]}'
</code></pre></div></li>
<li><p>Create a participant in business network B. Run the following command.</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer participant add --card networkB -d '{"$class": "org.example.mynetwork.Trader", "tradeId": "fred@example.com", "firstName": "Fred", "lastName": "Bloggs"}'
</code></pre></div></li>
<li><p>Create an asset in business network B. Run the following command. Note the different quantity property.</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer transaction submit --card networkB -d '{"$class": "org.hyperledger.composer.system.AddAsset", "targetRegistry" : "resource:org.hyperledger.composer.system.AssetRegistry#org.example.mynetwork.Commodity", "resources": [{"$class": "org.example.mynetwork.Commodity","tradingSymbol": "Ag","owner": "resource:org.example.mynetwork.Trader#fred@example.com","description": "a lot of gold", "mainExchange": "exchange", "quantity" : 500}]}'
</code></pre></div></li>
</ol>

<h2 id="step-five-bind-the-identity-on-network-a-to-the-participant-on-network-b">Step Five: Bind the identity on network A to the participant on network B</h2>

<ol>
<li><p>Export the networkA card to get the credentials</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer card export -c networkA
</code></pre></div></li>
<li><p>Unzip the card, you may need to rename networkA.card to networkA.zip.</p></li>
<li><p>Bind the identity to the participant. Run the following command.</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer identity bind --card networkB --participantId resource:org.hyperledger.composer.system.NetworkAdmin#admin --certificateFile ./networkA/credentials/certificate           
</code></pre></div></li>
<li><p>Create a card with the bound identity.</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer card create -p ~/.composer/cards/networkB/connection.json --businessNetworkName other-tutorial-network -u admin -c ./networkA/credentials/certificate  -k ./networkA/credentials/privateKey -f newNetworkB.card
</code></pre></div></li>
<li><p>Import the card</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer card import --file newNetworkB.card --card newNetworkB
</code></pre></div></li>
<li><p>Ping the network to activate the identity</p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network ping --card newNetworkB
</code></pre></div></li>
</ol>

<h2 id="step-six-review-the-asset-data">Step Six: Review the asset data</h2>

<p>View the asset to see that the quantity is 250.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    composer network list --card networkA -r org.example.mynetwork.Commodity -a Ag        
</code></pre></div>
<h2 id="step-seven-submit-a-transaction">Step Seven: Submit a transaction</h2>

<p>Submit a transaction to see the effect of querying an asset on a different business network. Note that NetworkB is only queried and the quantity is not changed.  </p>
<div class="highlight"><pre><code class="language-" data-lang="">    composer transaction submit --card networkA -d '{"$class": "org.example.mynetwork.Trade", "commodity": "resource:org.example.mynetwork.Commodity#Ag", "newOwner": "resource:org.example.mynetwork.Trader#bobId"}'
</code></pre></div>
<h2 id="step-eight-check-the-updated-asset">Step Eight: Check the updated asset</h2>

<p>View the updated asset to check that the quantity was correctly updated to 500.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    composer network list --card networkA -r org.example.mynetwork.Commodity -a Ag
</code></pre></div>
            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/unstable/assets/js/nav.js"></script>
<script src="/composer/unstable/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
