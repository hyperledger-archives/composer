<section *ngIf="!showSubScreen" class="header">
    <div class="left-align">My Wallet</div>
    <div class="right-align" *ngIf="!showSubScreen">
        <button type="button" class="secondary">
            <span>Import ID Card</span>
        </button>
        <button type="button" class="secondary" (click)="createIdCard()">
            <span>Create ID Card</span>
        </button>
    </div>
</section>
<section *ngIf="!showSubScreen" class="main-view">
    <div class="connection-profile" *ngFor="let connectionProfile of connectionProfiles; let profileIndex = index">
        <h2>Identities for {{connectionProfile.name === '$default' ? 'Web Browser' : connectionProfile.name }}
            <div class="connection-profile-buttons">
                <button *ngIf="connectionProfile.name !== '$default'" id="editConnectionProfileButton" type="button"
                        class="action circular"
                        (click)="editConnectionProfile(connectionProfile)">
                    <svg class="ibm-icon vertical-top" aria-hidden="true">
                        <use xlink:href="#icon-edit_24"></use>
                    </svg>
                </button>
                <button id="deployButton" type="button" class="action circular"
                        (click)="deployNetwork(connectionProfile)">
                    <svg class="ibm-icon vertical-top" aria-hidden="true">
                        <use xlink:href="#icon-deploy_24"></use>
                    </svg>
                </button>
            </div>
        </h2>
        <div class="identities">
            <identity-card *ngFor="let identity of connectionProfile.identities" [identity]="identity"
                           (onConnect)="changeIdentity(connectionProfile.name, identity.userId)"
                           (onDelete)="removeIdentity(connectionProfile.name, identity.userId)">
            </identity-card>
        </div>
    </div>
</section>
<section class="sub-view" *ngIf="showSubScreen">
    <div class="header">
        <button type="button" class="action" (click)="closeSubView()">
            <svg class="ibm-icon vertical-top rotate" aria-hidden="true">
                <use xlink:href="#icon-forward_16"></use>
            </svg>
            <span>My Wallet</span>
        </button>
    </div>
    <div *ngIf="showDeployNetwork">
        <import-business-network class="deploy" [deployNetwork]="true"
                                 (finishedSampleImport)="finishedDeploying()"></import-business-network>
    </div>
    <div *ngIf="editingConnectionProfile">
        <connection-profile (profileUpdated)="finishedEditingConnectionProfile($event)"
                            [connectionProfile]="editingConnectionProfile"></connection-profile>
    </div>
    <div *ngIf="creatingIdCard">
        <add-connection-profile (profileToUse)="addIdWithExistingProfile($event)"
                                (profileToEdit)="addIdWithNewProfile($event)"
                                (cancelAdd) = "closeSubView()"
                                [connectionProfiles]="connectionProfiles"></add-connection-profile>
    </div>
    <div *ngIf="editingIdCard">
        <add-identity (identityAdded)="completeCardAddition()"
                      (cancelAdd) = "closeSubView()"
                      [targetProfile]="targetProfile"></add-identity>
    </div>
</section>
<app-footer></app-footer>
