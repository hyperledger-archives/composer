<h1 id="javascript-functions">JavaScript Functions</h1>

<hr />

<p>A  Business Network Definition is composed of a set of model files
and a set of scripts. The scripts may contain transaction processor
functions that implement the transactions defined in the Business
Network Definitionâ€™s model files.</p>

<p>Transaction processor functions are automatically invoked by the runtime when transactions are submitted using the BusinessNetworkConnection API.</p>

<p>Decorators within documentation comments are used to annotate the functions with metadata required for runtime processing.</p>

<h2 id="sample-script">Sample Script</h2>

<p>The script below defines two transaction processor functions, called <code class="highlighter-rouge">onAnimalMovementDeparture</code> and <code class="highlighter-rouge">onAnimalMovementArrival</code>. Note that the model files within the <code class="highlighter-rouge">BusinessNetworkDefinition</code> must define the two transaction types <code class="highlighter-rouge">com.ibm.composer.mozart.AnimalMovementDeparture</code> and <code class="highlighter-rouge">com.ibm.composer.mozart.AnimalMovementArrival</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    ```
    'use strict';

    /*eslint-disable no-unused-vars*/
    /*eslint-disable no-undef*/

    /**
    * A transaction processor for AnimalMovementDeparture
    * @param  {com.ibm.composer.mozart.AnimalMovementDeparture} movementDeparture - the transaction to be processed
    * @transaction
    */
    function onAnimalMovementDeparture(movementDeparture) {
        console.log('onAnimalMovementDeparture');
    }

    /**
    * A transaction processor for AnimalMovementArrival
    * @param  {com.ibm.composer.mozart.AnimalMovementArrival} movementArrival - the transaction to be processed
    * @transaction
    */
    function onAnimalMovementArrival(movementArrival) {
        console.log('onAnimalMovementArrival');
    }

    /*eslint-enable no-unused-vars*/
    /*eslint-enable no-undef*/
    }
    ```
</code></pre>
</div>

<p>Transaction processor functions may use the APIs defined in the <code class="highlighter-rouge">composer-runtime</code> module to access asset registries to create/read/update/delete assets. The <code class="highlighter-rouge">getCurrentParticipant</code> function may be called to determine the identity of the caller (identity used to submit a transaction for processing).</p>

<h2 id="decorators">Decorators</h2>

<p>JSDoc documentation comments are used to supply metadata about the purpose and
parameters of the functions in the script.</p>

<p>The standard @param decorator must be used to specify the types of parameters for functions.</p>

<p>The @transaction decorator is added to a function to indicate that it processes incoming transactions. Functions with the @transaction decorator must take a single transaction type parameter. The transaction type must be defined in the model files in the business network definition.</p>
