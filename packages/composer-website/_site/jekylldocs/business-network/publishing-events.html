<h1 id="publishing-events">Publishing Events</h1>

<p>Events can be published by  and subscribed to by applications. Events are defined in the model file of a business network definition, and are emitted by transaction JavaScript in the transaction processor functions file.</p>

<h2 id="before-you-begin">Before you begin</h2>

<p>Before you begin adding events to your business network, you should have a good understanding of the modelling language for business networks, and what makes up a full business network definition.</p>

<h2 id="procedure">Procedure</h2>

<ol>
  <li>
    <p>Events are defined in the model file (<code class="highlighter-rouge">.cto</code>) of your business network definition, in the same way as assets and participants. Events use the following format:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> ```
 event BasicEvent identified by eventId {
 o String eventId
 }
 ```
</code></pre>
    </div>
  </li>
  <li>
    <p>In order for the event to be published the transaction which creates the event must include three functions, the first is the <code class="highlighter-rouge">getFactory</code> function. The <code class="highlighter-rouge">getFactory</code> allows events to be created as part of a transaction. Next, an event must be created by using <code class="highlighter-rouge">factory.newEvent('org.namespace', 'BasicEvent')</code>. This creates a <code class="highlighter-rouge">BasicEvent</code> from the business network model file in the defined organisation namespace. Lastly, the event must be emitted by using <code class="highlighter-rouge">emit(BasicEvent)</code>. A simple transaction which calls this event would look like this:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> ```JavaScript
 /**
  * @param {org.namespace.BasicEventTransaction} basicEventTransaction
  * @transaction
  */
 function basicEventTransaction(basicEventTransaction) {
     var factory = getFactory();

     var basicEvent = factory.newEvent('org.namespace', 'BasicEvent');
     emit(basicEvent);
 }
 ```
</code></pre>
    </div>
  </li>
</ol>

<p>This transaction would create and publish an event of the <code class="highlighter-rouge">BasicEvent</code> type as defined in the business networkâ€™s model file. For more information on the getFactory function, see the <a href="https://hyperledger.github.io/composer/jsdoc/module-composer-runtime.html#getFactory"> API documentation</a>.</p>

<h2 id="what-next">What next?</h2>

<ul>
  <li><a href="../applications/subscribing-to-events.html">Subscribing to events</a></li>
  <li><a href="../applications/genapp.html">Creating an application</a></li>
</ul>

<hr />
