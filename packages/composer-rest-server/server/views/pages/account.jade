extends ../layouts/layout

block content
  for wallet in user.wallets()
    h4 Wallet ##{wallet.id} - #{wallet.description}
    table.table
      thead
        th #
        th Enrollment ID
        th Enrollment Secret
        th.text-center
          button.btn.btn-sm.btn-success.fa.fa-plus(onclick='showAddIdentity("#{wallet.id}")')
      for identity in wallet.identities()
        tr(class=identity.certificate ? 'info' : null)
          td= identity.id
          td= identity.enrollmentID
          td= identity.enrollmentSecret
          td.text-center
            if wallet.defaultIdentity && identity.id.toString() === wallet.defaultIdentity.toString()
              a.btn.btn-sm.btn-warning.fa.fa-star(disabled='disabled')
            else
              button.btn.btn-sm.btn-default.fa.fa-star(onclick='setDefaultIdentity("#{wallet.id}", "#{identity.id}")')
  p
  h4 Access token
  pre= accessToken

block modal
  #myModal.modal.fade(role='dialog')
    .modal-dialog
      .modal-content
        .modal-header
          button.close(type='button', data-dismiss='modal')
            | &times;
          h4.modal-title Add identity
        .modal-body
          form
            input#walletID(type='hidden')
            .form-group
                label Enrollment ID
                input.form-control#enrollmentID(type='text')
            .form-group
                label Enrollment secret
                input.form-control#enrollmentSecret(type='text')
        .modal-footer
          button.btn.btn-default(type='button', data-dismiss='modal') Cancel
          button.btn.btn-primary(type='button', onclick='addIdentity()') Add
