/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package main

import "github.com/hyperledger/fabric/core/chaincode/shim"
import "testing"

func TestInit(t *testing.T) {
	logger.SetLevel(shim.LogDebug)
	chaincode := NewChaincode()
	stub := shim.NewMockStub("composer", chaincode)
	stub.MockInit("c10a2928-c161-462b-8a3a-f0a609b8855f", [][]byte{
		[]byte("init"),
		[]byte("UEsDBAoAAAAAADptjUoFEkB9cgQAAHIEAAAMAAAAcGFja2FnZS5qc29ueyJuYW1lIjoiYmFzaWMtc2FtcGxlLW5ldHdvcmsiLCJ2ZXJzaW9uIjoiMC4wLjciLCJkZXNjcmlwdGlvbiI6IlRoZSBIZWxsbyBXb3JsZCBvZiBGYWJyaWMgQ29tcG9zZXIgc2FtcGxlcyIsInNjcmlwdHMiOnsicHJlcHVibGlzaCI6Im1rZGlycCAuL2Rpc3QgJiYgY29tcG9zZXIgYXJjaGl2ZSBjcmVhdGUgLS1zb3VyY2VUeXBlIGRpciAtLXNvdXJjZU5hbWUgLiAtYSAuL2Rpc3QvYmFzaWMtc2FtcGxlLW5ldHdvcmsuYm5hIiwicHJldGVzdCI6Im5wbSBydW4gbGludCIsImxpbnQiOiJlc2xpbnQgLiIsInBvc3RsaW50IjoibnBtIHJ1biBsaWNjaGsiLCJsaWNjaGsiOiJsaWNlbnNlLWNoZWNrIiwicG9zdGxpY2NoayI6Im5wbSBydW4gZG9jIiwiZG9jIjoianNkb2MgLS1wZWRhbnRpYyAtLXJlY3Vyc2UgLWMganNkb2MuY29uZiIsInRlc3QiOiJtb2NoYSAtLXJlY3Vyc2l2ZSIsImRlcGxveSI6Ii4vc2NyaXB0cy9kZXBsb3kuc2gifSwicmVwb3NpdG9yeSI6eyJ0eXBlIjoiZ2l0IiwidXJsIjoiaHR0cHM6Ly9naXRodWIuY29tL2ZhYnJpYy1jb21wb3Nlci9zYW1wbGUtbmV0d29ya3MuZ2l0In0sImtleXdvcmRzIjpbInNhbXBsZSIsIm5ldHdvcmsiXSwiYXV0aG9yIjoiRmFicmljIENvbXBvc2VyIiwibGljZW5zZSI6IkFwYWNoZS0yLjAiLCJkZXZEZXBlbmRlbmNpZXMiOnsiYnJvd3NlcmZzIjoiXjEuMi4wIiwiY2hhaSI6Il4zLjUuMCIsImNvbXBvc2VyLWFkbWluIjoibGF0ZXN0IiwiY29tcG9zZXItY2xpIjoibGF0ZXN0IiwiY29tcG9zZXItY2xpZW50IjoibGF0ZXN0IiwiY29tcG9zZXItY29ubmVjdG9yLWVtYmVkZGVkIjoibGF0ZXN0IiwiZXNsaW50IjoiXjMuNi4xIiwiaXN0YW5idWwiOiJeMC40LjUiLCJqc2RvYyI6Il4zLjQuMSIsImxpY2Vuc2UtY2hlY2siOiJeMS4xLjUiLCJta2RpcnAiOiJeMC41LjEiLCJtb2NoYSI6Il4zLjIuMCIsIm1vbWVudCI6Il4yLjE3LjEifSwibGljZW5zZS1jaGVjay1jb25maWciOnsic3JjIjpbIioqLyouanMiLCIhLi9jb3ZlcmFnZS8qKi8qIiwiIS4vbm9kZV9tb2R1bGVzLyoqLyoiLCIhLi9vdXQvKiovKiIsIiEuL3NjcmlwdHMvKiovKiJdLCJwYXRoIjoiaGVhZGVyLnR4dCIsImJsb2NraW5nIjp0cnVlLCJsb2dJbmZvIjpmYWxzZSwibG9nRXJyb3IiOnRydWV9fVBLAwQKAAAAAAA6bY1KWbhEiXwEAAB8BAAACQAAAFJFQURNRS5tZCMgV2VsY29tZSB0byBGYWJyaWMgQ29tcG9zZXIhCgpUaGlzIGlzIHRoZSAiSGVsbG8gV29ybGQiIG9mIENvbXBvc2VyIHNhbXBsZXMuCgpUaGlzIHNhbXBsZSBkZWZpbmVzIGEgYnVzaW5lc3MgbmV0d29yayBjb21wb3NlZCBvZiBhIHNpbmdsZSBhc3NldCB0eXBlIChgU2FtcGxlQXNzZXRgKSwgYSBzaW5nbGUgcGFydGljaXBhbnQgdHlwZSAoYFNhbXBsZVBhcnRpY2lwYW50YCksIGFuZCBhIHNpbmdsZSB0cmFuc2FjdGlvbiB0eXBlIChgU2FtcGxlVHJhbnNhY3Rpb25gKS4KCmBTYW1wbGVBc3NldHNgIGFyZSBvd25lZCBieSBhIGBTYW1wbGVQYXJ0aWNpcGFudGAsIGFuZCB0aGUgdmFsdWUgcHJvcGVydHkgb24gYSBgU2FtcGxlQXNzZXRgIGNhbiBiZSBtb2RpZmllZCBieSBzdWJtaXR0aW5nIGEgYFNhbXBsZVRyYW5zYWN0aW9uYC4KClRvIGdldCBzdGFydGVkIGluc2lkZSB0aGUgQ29tcG9zZXIgUGxheWdyb3VuZCB5b3UgY2FuIGNsaWNrIHRoZSBUZXN0IHRhYiBhbmQgY3JlYXRlIGluc3RhbmNlcyBvZiBgU2FtcGxlQXNzZXRgIGFuZCBgU2FtcGxlUGFydGljaXBhbnRgLiBNYWtlIHN1cmUgdGhhdCB0aGUgb3duZXIgcHJvcGVydHkgb24gdGhlIGBTYW1wbGVBc3NldGAgcmVmZXJzIHRvIGEgYFNhbXBsZVBhcnRpY2lwYW50YCB0aGF0IHlvdSBoYXZlIGNyZWF0ZWQuCgpZb3UgY2FuIHRoZW4gc3VibWl0IGEgYFNhbXBsZVRyYW5zYWN0aW9uYCwgbWFraW5nIHN1cmUgdGhhdCB0aGUgYXNzZXQgcHJvcGVydHkgcmVmZXJzIHRvIGFuIGFzc2V0IHRoYXQgeW91IGNyZWF0ZWQgZWFybGllci4gQWZ0ZXIgdGhlIHRyYW5zYWN0aW9uIGhhcyBiZWVuIHByb2Nlc3NlZCB5b3Ugc2hvdWxkIHNlZSB0aGF0IHRoZSB2YWx1ZSBwcm9wZXJ0eSBvbiB0aGUgYXNzZXQgaGFzIGJlZW4gbW9kaWZpZWQuCgpUaGUgbG9naWMgZm9yIHVwZGF0aW5nIHRoZSBhc3NldCB3aGVuIGEgYFNhbXBsZVRyYW5zYWN0aW9uYCBpcyBwcm9jZXNzZWQgaXMgd3JpdHRlbiBpbiBgbG9naWMuanNgLgoKRG9uJ3QgZm9yZ2V0IHlvdSBjYW4gaW1wb3J0IG1vcmUgYWR2YW5jZWQgc2FtcGxlcyBpbnRvIHRoZSBDb21wb3NlciBQbGF5Z3JvdW5kIHVzaW5nIHRoZSBJbXBvcnQvUmVwbGFjZSBidXR0b24uCgpIYXZlIGZ1biBsZWFybmluZyBGYWJyaWMgQ29tcG9zZXIhUEsDBAoAAAAAADptjUoZ2Mkp1QAAANUAAAAPAAAAcGVybWlzc2lvbnMuYWNsLyoqCiAqIFNhbXBsZSBhY2Nlc3MgY29udHJvbCBsaXN0LgogKi8KcnVsZSBEZWZhdWx0IHsKICAgIGRlc2NyaXB0aW9uOiAiQWxsb3cgYWxsIHBhcnRpY2lwYW50cyBhY2Nlc3MgdG8gYWxsIHJlc291cmNlcyIKICAgIHBhcnRpY2lwYW50OiAiQU5ZIgogICAgb3BlcmF0aW9uOiBBTEwKICAgIHJlc291cmNlOiAib3JnLmFjbWUuc2FtcGxlIgogICAgYWN0aW9uOiBBTExPVwp9UEsDBAoAAAAAADptjUoAAAAAAAAAAAAAAAAHAAAAbW9kZWxzL1BLAwQKAAAAAAA6bY1KbLDHIb0BAAC9AQAAGgAAAG1vZGVscy9vcmcuYWNtZS5zYW1wbGUuY3RvLyoqCiAqIFNhbXBsZSBidXNpbmVzcyBuZXR3b3JrIGRlZmluaXRpb24uCiAqLwpuYW1lc3BhY2Ugb3JnLmFjbWUuc2FtcGxlCgphc3NldCBTYW1wbGVBc3NldCBpZGVudGlmaWVkIGJ5IGFzc2V0SWQgewogIG8gU3RyaW5nIGFzc2V0SWQKICAtLT4gU2FtcGxlUGFydGljaXBhbnQgb3duZXIKICBvIFN0cmluZyB2YWx1ZQp9CgpwYXJ0aWNpcGFudCBTYW1wbGVQYXJ0aWNpcGFudCBpZGVudGlmaWVkIGJ5IHBhcnRpY2lwYW50SWQgewogIG8gU3RyaW5nIHBhcnRpY2lwYW50SWQKICBvIFN0cmluZyBmaXJzdE5hbWUKICBvIFN0cmluZyBsYXN0TmFtZQp9Cgp0cmFuc2FjdGlvbiBTYW1wbGVUcmFuc2FjdGlvbiBpZGVudGlmaWVkIGJ5IHRyYW5zYWN0aW9uSWQgewogIG8gU3RyaW5nIHRyYW5zYWN0aW9uSWQKICAtLT4gU2FtcGxlQXNzZXQgYXNzZXQKICBvIFN0cmluZyBuZXdWYWx1ZQp9ClBLAwQKAAAAAAA6bY1KAAAAAAAAAAAAAAAABAAAAGxpYi9QSwMECgAAAAAAOm2NSg5xtySBAwAAgQMAAAwAAABsaWIvbG9naWMuanMvKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKLyoqCiAqIFNhbXBsZSB0cmFuc2FjdGlvbiBwcm9jZXNzb3IgZnVuY3Rpb24uCiAqLwpmdW5jdGlvbiBvblNhbXBsZVRyYW5zYWN0aW9uKHNhbXBsZVRyYW5zYWN0aW9uKSB7CiAgICBzYW1wbGVUcmFuc2FjdGlvbi5hc3NldC52YWx1ZSA9IHNhbXBsZVRyYW5zYWN0aW9uLm5ld1ZhbHVlOwogICAgcmV0dXJuIGdldEFzc2V0UmVnaXN0cnkoJ29yZy5hY21lLnNhbXBsZS5TYW1wbGVBc3NldCcpCiAgICAgIC50aGVuKGZ1bmN0aW9uIChhc3NldFJlZ2lzdHJ5KSB7CiAgICAgICAgICByZXR1cm4gYXNzZXRSZWdpc3RyeS51cGRhdGUoc2FtcGxlVHJhbnNhY3Rpb24uYXNzZXQpOwogICAgICB9KTsKfQpQSwECFAAKAAAAAAA6bY1KBRJAfXIEAAByBAAADAAAAAAAAAAAAAAAAAAAAAAAcGFja2FnZS5qc29uUEsBAhQACgAAAAAAOm2NSlm4RIl8BAAAfAQAAAkAAAAAAAAAAAAAAAAAnAQAAFJFQURNRS5tZFBLAQIUAAoAAAAAADptjUoZ2Mkp1QAAANUAAAAPAAAAAAAAAAAAAAAAAD8JAABwZXJtaXNzaW9ucy5hY2xQSwECFAAKAAAAAAA6bY1KAAAAAAAAAAAAAAAABwAAAAAAAAAAABAAAABBCgAAbW9kZWxzL1BLAQIUAAoAAAAAADptjUpssMchvQEAAL0BAAAaAAAAAAAAAAAAAAAAAGYKAABtb2RlbHMvb3JnLmFjbWUuc2FtcGxlLmN0b1BLAQIUAAoAAAAAADptjUoAAAAAAAAAAAAAAAAEAAAAAAAAAAAAEAAAAFsMAABsaWIvUEsBAhQACgAAAAAAOm2NSg5xtySBAwAAgQMAAAwAAAAAAAAAAAAAAAAAfQwAAGxpYi9sb2dpYy5qc1BLBQYAAAAABwAHAJcBAAAoEAAAAAA="),
	})
}
